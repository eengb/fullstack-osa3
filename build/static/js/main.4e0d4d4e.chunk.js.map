{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","App.js","index.js"],"names":["Filter","props","value","newFilter","onChange","handleFilterChange","PersonForm","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","type","Person","person","handleDelete","className","name","number","onClick","id","Persons","persons","map","fPersons","baseUrl","exportedObject","getAll","axios","get","then","response","data","create","NameObject","post","remove","request","delete","console","log","update","newObject","put","Notification","message","messageColor","App","useState","setPersons","setNewName","setNewNumber","setFilter","errorMessage","setErrorMessage","setMessageColor","useEffect","personService","ip","setFPersons","filter","event","target","toLowerCase","indexOf","personform","preventDefault","undefined","find","p","returnedPerson","concat","setTimeout","catch","error","confirmUpdate","window","confirm","tbUpdatedPersonInfo","tbDeletedPerson","error_name","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4e0d4d4e.chunk.js","sourcesContent":["const Filter =(props)=>{\n\n    return(\n      <div>\n          filter shown with: <input \n            value={props.newFilter}\n            onChange={props.handleFilterChange}\n            />\n            </div>\n  \n    )\n  }\n\n  export default Filter","const PersonForm = (props) =>{\n\n    return(\n  \n      <form onSubmit= {props.addName}>\n      <div>\n      name: <input \n        value={props.newName}\n        onChange={props.handleNameChange}\n        />\n        </div>\n        <div>\n        number: <input \n        value={props.newNumber}\n        onChange={props.handleNumberChange}\n        />\n        </div>\n      <button type=\"submit\">add</button>\n    </form>\n    )\n  \n  }\n\n  export default PersonForm","\nconst Persons = (props)=>{\n  \n    if(props.newFilter === '' ){\n  \n      return(\n  \n        <ul>\n            {props.persons.map(person => \n               <Person key={person.name} person={person} handleDelete={props.handleDelete}    />\n            )}\n          </ul>\n      )\n  \n      \n    }else {\n    \n    return(\n  \n      <ul>\n          {props.fPersons.map(person => \n             <Person key={person.name} person={person} handleDelete={props.handleDelete}  />\n          )}\n        </ul>\n  \n    )\n          }\n  }\n\n  const Person = ({person, handleDelete}) =>\n  <div className=\"person\">\n    <span className=\"person--name\">{person.name}</span>\n    <span className=\"person--number\">{person.number}</span>\n    <button className=\"button\" onClick={() => handleDelete(person.id)}>\n      Delete\n    </button>\n  </div>\n\n\n\n  \n\n  \n\n  export default Persons","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\n\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n}\n\nconst create = NameObject => {\n    const request = axios.post(baseUrl, NameObject)\n    return request.then(response => response.data)\n\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  console.log(request)\n  return request.then(response => response.data)\n  }\n\n  const update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n  }\n\n\nconst exportedObject ={\n    getAll,create,remove,update\n\n}\nexport default exportedObject\n","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport './index.css'\nimport personService from './services/persons'\n\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [ newName, setNewName ] = useState('')\n  const [newNumber, setNewNumber]= useState('')\n  const [newFilter, setFilter] = useState('')\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [messageColor, setMessageColor]= useState(true)\n\n \n\n\n\n  const hook = () => {\n    personService\n        .getAll()\n        .then(ip => {\n          setPersons(ip) } )\n      \n  }\n  \n  useEffect(hook, [])\n\n\n\n\n\n\n\n  const [fPersons,setFPersons]= useState(persons)\n\n\n  \n  \n  \n  \n  const addName = (event) => {\n    event.preventDefault()\n    \n    \n    const NameObject = {\n      name: newName,\n      number: newNumber\n    }\n\n\n    const personExists = persons.find((p => p.name.toLowerCase() === newName.toLowerCase()))\n\n      if (personExists===undefined){\n\n        personService\n              .create(NameObject)\n              .then(returnedPerson => {\n                setPersons(persons.concat(returnedPerson))\n                setNewName('')\n                setNewNumber('')\n                setMessageColor(true)\n                setErrorMessage(\n                  `${newName} was successfully added`\n                )\n                setTimeout(() => {\n                  setErrorMessage(null)\n                }, 5000)\n              })\n              .catch(error => {\n                setMessageColor(false)\n                setErrorMessage(\n                  error.response.data.error\n                )\n                setTimeout(() => {\n                  setErrorMessage(null)\n                }, 5000)\n                \n                console.log(error.response.data)\n              })\n  \n    }else{\n\n    const confirmUpdate = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one? `)\n\n\n      const person = persons.find((p) => p.name.toLowerCase() === newName.toLowerCase())\n\n\n      const {id} =person\n      \n\n\n\n      const tbUpdatedPersonInfo = {...person, number:newNumber}\n      \n\n      if (confirmUpdate){\n\n\n        personService\n        .update(id, tbUpdatedPersonInfo)\n        .then((returnedPerson) => {\n          setPersons(\n            persons.map((person) =>\n              person.id !== id ? person : returnedPerson)\n          )\n          setMessageColor(true)\n          setErrorMessage(\n            `Updated ${newName} `\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000) \n          \n          setNewName('')\n          setNewNumber('')\n          setFilter('')\n         \n        })\n        .catch(error => {\n         \n          setMessageColor(false)\n          setErrorMessage(error.response.data.error)\n          setTimeout(() => { setErrorMessage(null)}, 5000)\n  \n         \n        })\n          \n  \n    \n    }else{\n  \n      console.log(\"no changes done\")\n    }\n  }\n}\n  \n\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleFilterChange = (event) => {\n    setFilter(event.target.value)\n\n    setFPersons(persons.filter((person) => (person.name.toLowerCase().indexOf(event.target.value.toLowerCase()) !==-1)))\n    \n  }\n\n\n  const handleDelete = (id) => {\n\n    const tbDeletedPerson = persons.find((p) => p.id === id)\n\n    const error_name = tbDeletedPerson.name\n\n    const confirmDelete = window.confirm(`Delete ${tbDeletedPerson.name}?`)\n\n    if (confirmDelete) {\n\n      personService.remove(id).then(() => {const fPersons = persons.filter((p) => p.id !== id)\n        setPersons(fPersons)\n      \n      })\n        .catch(error => {\n          setMessageColor(false)\n          setErrorMessage(`Person ${error_name} was already removed from server`)\n          console.log(error.response.data)\n\n          \n          setTimeout(() => {setErrorMessage(null)}, 5000)\n          \n        })\n          \n           \n\n\n        setErrorMessage(\n          `Deleted ${tbDeletedPerson.name} `\n        )\n        setTimeout(() => {\n          setErrorMessage(null)\n        }, 5000)\n\n\n        const fPersons = persons.filter((p) => p.id !== id)\n        setPersons(fPersons)\n \n        setFilter(\"\")\n\n     \n\n    }\n\n  }\n  \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={errorMessage } messageColor={messageColor} />\n      < Filter filter newFilter = {newFilter} handleFilterChange={handleFilterChange} />\n      <h3>Add a new</h3>\n      < PersonForm personform addName={addName} newName={newName} handleNameChange={handleNameChange} newNumber={newNumber} handleNumberChange={handleNumberChange} />\n      <h3>Numbers</h3>\n      <Persons p fPersons={fPersons} persons={persons} newFilter={newFilter} handleDelete={handleDelete} />  \n    </div>\n  )\n\n}\n\nconst Notification = ({ message, messageColor }) => {\n  if (message === null) {\n    return null\n  }\n  if (messageColor===true) {\n    return(\n    <div className=\"errorGreen\">\n      {message}\n    </div>)\n  }else{\n\n\n  return (\n    <div className=\"errorRed\">\n      {message}\n    </div>\n  )\n}\n}\n\n\n\n\nexport default App","import ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(\n  <App />, \n  document.getElementById('root')\n)"],"sourceRoot":""}